var trivia = [{
    question: "Which of these was not the subject of a handheld Disney video game by Tiger?",
    A: "A Bug's Life",
    B: "Lion King",
    C: "Aladdin",
    D: "Toy Story 2",
    correct: "D"
},{
    question: "Which of these is a system made by Sega?",
    A: "Master System",
    B: "64",
    C: "Genetic",
    D: "2600",
    correct: "A"
},{
    question: "What is the name of Sonic the Hedgehog's echidna friend?",
    A: "Tails",
    B: "Knuckles",
    C: "Cold Steel",
    D: "Jeffrey",
    correct: "B"
},{
    question: "If you attack a ____ in Zelda, a whole bunch of them may band together and kill you.",
    A: "Cuckoo",
    B: "Wolf",
    C: "Cow",
    D: "Henchman",
    correct: "A"
},{
    question: "What is the name of spaceship on which Master Chief is awakened in the beginning of Halo?",
    A: "UNSC Warrior",
    B: "Pillar of Autumn",
    C: "Shippy McShipface",
    D: "Voyager",
    correct: "B"
},{
    question: "What is the name of the murderous AI in the game Portal?",
    A: "jQuery",
    B: "C3PO",
    C: "M.O.M.",
    D: "GladOS",
    correct: "D"
},{
    question: "What is the name of the founder of Aperture Science from the game Portal?",
    A: "Doug Rattmann",
    B: "George Costanza",
    C: "Gordon Freeman",
    D: "Cave Johnson",
    correct: "D"
},{
    question: "The standard currency for the land of Hyrule from Legend of Zelda is the ____.",
    A: "Gold",
    B: "Rupee",
    C: "Power Gem",
    D: "Triforce Shard",
    correct: "B"
},{
    question: "In the Legend of Zelda: ____, Link sails among a series of islands to save the world.",
    A: "Windwaker",
    B: "Majora's Mask",
    C: "Of the Caribbean",
    D: "Sailing Home",
    correct: "A"
},{
    question: "In this game, Nintendo characters get together to fight each other.",
    A: "Super Mario",
    B: "Super Smash Bros",
    C: "Super Ultra Mega",
    D: "Super Fight Night",
    correct: "B"
},{
    question: "The first video game console available to consumers was the Magnavox Odyssey, released in ____ .",
    A: "1972",
    B: "1983",
    C: "1985",
    D: "1984",
    correct: "A"
},{
    question: "The first commercially available video game console was called the ____ .",
    A: "Coleco Vision",
    B: "Atari 2600",
    C: "Panasonic F-Box",
    D: "Magnavox Odyssey",
    correct: "D"
},{
    question: "The Magnavox Odyssey system was created by ____ .",
    A: "Steve Jobs",
    B: "Ralph Baer",
    C: "Bill Gates",
    D: "Steve Wozniak",
    correct: "B"
},{
    question: "All of the following are games that were available on the original Atari 2600 except:",
    A: "Adventure",
    B: "Breakout",
    C: "Pong",
    D: "Yar's Revenge",
    correct: "C"
},{
    question: "What is the first planet attacked by the Covenant in the Halo series?",
    A: "E3-27",
    B: "Earth",
    C: "Xagablar",
    D: "Reach",
    correct: "D"
},{
    question: "In the Halo series, what is the name of the super soldiers fighting for humanity?",
    A: "Trojans",
    B: "Spartans",
    C: "Special Forces",
    D: "Rangers",
    correct: "B"
},{
    question: "Donkey Kong was acutally called ____ in Japan, but it was mistakenly translated as Donkey Kong.",
    A: "Monkey Kong",
    B: "King Kong",
    C: "Horse Kong",
    D: "Donkey Bong",
    correct: "A"
},{
    question: "The original Microsoft X-Box was released in ____.",
    A: "1999",
    B: "2000",
    C: "2001",
    D: "2002",
    correct: "C"
},{
    question: "In 2016, what game won the Game Awards Game of the Year?",
    A: "Uncharted 4",
    B: "DOOM",
    C: "Pokemon Go",
    D: "Overwatch",
    correct: "D"
},{
    question: "How many characters (including secret) were available in the original Super Smash Bros?",
    A: "10",
    B: "12",
    C: "20",
    D: "8",
    correct: "B"
},{
    question: "All the following characters were available in Mario Tennis for Nintendo 64 except:",
    A: "Birdo",
    B: "Rosalina",
    C: "Boo",
    D: "Baby Mario",
    correct: "B"
},{
    question: "All of these characters were available for Mario Kart for Nintendo 64 except:",
    A: "Bowser",
    B: "Boo",
    C: "Toad",
    D: "Donkey Kong",
    correct: "B"
},{
    question: "The name of the villain in the Sonic the Hedgehog series is called ____.",
    A: "Knuckles",
    B: "Dr. Robotnick",
    C: "Mr. Roboto",
    D: "Doctor Claw",
    correct: "B"
},{
    question: "The many prizes available to players in the game Smash TV included:",
    A: "Aquariums",
    B: "Televisions",
    C: "Steering Wheels",
    D: "Silver Nuggets",
    correct: "B"
},{
    question: "Yoshi is what type of animal?",
    A: "Gecko",
    B: "Dinosaur",
    C: "Chameleon",
    D: "Lizard",
    correct: "B"
},{
    question: "Mario's occupation is ____.",
    A: "Hero",
    B: "Warrior",
    C: "Garbage Man",
    D: "Plumber",
    correct: "D"
},{
    question: "Which of the following is a fighting game?",
    A: "Smash Lords",
    B: "Soulcalibur",
    C: "Ultimate Punch Face",
    D: "Boxing Insanity",
    correct: "B"
},{
    question: "In the arcade game ''Toobin','' which of the following is not a risk to the tubers?",
    A: "Sticks",
    B: "Rocks",
    C: "Soda Cans",
    D: "Bears",
    correct: "D"
},{
    question: "The first item Link obtains in the original Legend of Zelda is a ____.",
    A: "Lantern",
    B: "Bow",
    C: "Sword",
    D: "Hat",
    correct: "C"
},{
    question: "The name of the main character in the Mass Effect video game series is:",
    A: "Master Chief",
    B: "Uhura",
    C: "Shepherd",
    D: "Cortana",
    correct: "C"
},{
    question: "The first generation of Pokemon games released in America were:",
    A: "Red and Green",
    B: "Red and Blue",
    C: "Gold and Silver",
    D: "Black and White",
    correct: "B"
},{
    question: "In the original Pac-Man, all of the following fruits were available except:",
    A: "Apple",
    B: "Orange",
    C: "Melon",
    D: "Banana",
    correct: "D"
},{
    question: "All of the following were colors of the ghosts in the original Pac-Man except:",
    A: "Green",
    B: "Blue",
    C: "Red",
    D: "Pink",
    correct: "A"
},{
    question: "Which of the following was a system produced by Nintendo?",
    A: "Genesis",
    B: "Color TV-Game",
    C: "SE-30",
    D: "Scorpion",
    correct: "B"
},{
    question: "The main character of Skyrim is called the ____.",
    A: "Master of Dragons",
    B: "Mountain King",
    C: "Dragonborn",
    D: "Hero of Time",
    correct: "C"
},{
    question: "Who is the princess of the Mushroom Kingdom?",
    A: "Zelda",
    B: "Peach",
    C: "Daisy",
    D: "Rosalina",
    correct: "B"
},{
    question: "This video game developer made Sea of Thieves and Banjo Kazooie.",
    A: "Rare",
    B: "Ubisoft",
    C: "Nintendo",
    D: "Sega",
    correct: "A"
},{
    question: "What is the name of the research facility in the game Half-Life?",
    A: "Aperture Science",
    B: "Umbrella Corp",
    C: "Area 51",
    D: "Black Mesa",
    correct: "D"
},{
    question: "What is the name of the ship Isaac must escape in Dead Space?",
    A: "Pillar of Autumn",
    B: "USS Horizon",
    C: "USG Ishimura",
    D: "Enterprise",
    correct: "C"
},{
    question: "The main character of Dead Space is a ____.",
    A: "Soldier",
    B: "Custodian",
    C: "Pilot",
    D: "Engineer",
    correct: "D"
},{
    question: "What kind creature is Spyro?",
    A: "Dragon",
    B: "Dinosaur",
    C: "Lizard",
    D: "Wyvern",
    correct: "A"
},{
    question: "In The Legend of Zelda: Twilight Princess, Link transforms into a ____.",
    A: "Rabbit",
    B: "Wolf",
    C: "Bird",
    D: "Zora",
    correct: "B"
},{
    question: "In the Legend of Zelda: Link to the Past, Link transforms into a ____.",
    A: "Wolf",
    B: "Goron",
    C: "Rabbit",
    D: "Deku",
    correct: "C"
},{
    question: "This race in Legend of Zelda eats rocks and lives in the mountains.",
    A: "Zora",
    B: "Deku",
    C: "Hylian",
    D: "Goron",
    correct: "D"
},{
    question: "This race in Legend of Zelda is made of wood and lives in the forests.",
    A: "Deku",
    B: "Goron",
    C: "Zora",
    D: "Hylian",
    correct: "A"
},{
    question: "This race in Legend of Zelda live in the oceans and can breathe underwater.",
    A: "Hylian",
    B: "Zora",
    C: "Goron",
    D: "Deku",
    correct: "B"
},{
    question: "Who is the creator of Minecraft?",
    A: "Bill Gates",
    B: "Shigeru Myamoto",
    C: "Markus Persson",
    D: "Kideo Kojima",
    correct: "C"
},{
    question: "Often called the father of Nintendo, this man created Mario and Zelda.",
    A: "Hideo Kojima",
    B: "Shinzo Abe",
    C: "Hayao Miyazaki",
    D: "Shigeru Myamoto",
    correct: "D"
},{
    question: "Who developed the original Pokemon games for Game Boy?",
    A: "Game Freak",
    B: "Game Shark",
    C: "Nintendo",
    D: "Sega",
    correct: "A"
},{
    question: "What is the 150th Pokemon?",
    A: "Pikachu",
    B: "Mewtwo",
    C: "Tauros",
    D: "Mew",
    correct: "B"
},{
    question: "Which of these is not a legendary Pokemon?",
    A: "Articuno",
    B: "Zapdos",
    C: "Dragonite",
    D: "Moltres",
    correct: "C"
},{
    question: "Which of these is not a race featured in the Mass Effect games?",
    A: "Turian",
    B: "Solarian",
    C: "Krogan",
    D: "Vulcan",
    correct: "D"
},{
    question: "What is the name of Commander Shepherd's ship in Mass Effect?",
    A: "Normandy",
    B: "Bounty",
    C: "Ishimura",
    D: "Black Pearl",
    correct: "A"
},{
    question: "Which of the following is a type of pet available in Mass Effect?",
    A: "Dog",
    B: "Hamster",
    C: "Varen",
    D: "Cat",
    correct: "B"
},{
    question: "Where can Mario be seen in the game Punch Out?",
    A: "In the crowd",
    B: "As a fighter",
    C: "As the referee",
    D: "As a coach",
    correct: "C"
},{
    question: "What is the Konami Code?",
    A: "rosebud",
    B: "iddqd",
    C: "ROCKETMAN",
    D: "↑↑↓↓←→←→BA",
    correct: "D"
},{
    question: "What is the title of the fifth Elder Scrolls game?",
    A: "Skyrim",
    B: "Morrowind",
    C: "Oblivion",
    D: "Shivering Isles",
    correct: "A"
},{
    question: "In Golden Axe, the Dwarf was voiced by a man on death row called ____.",
    A: "Jim Bob",
    B: "The Bloodalyzer",
    C: "Murderface",
    D: "The Joker",
    correct: "B"
},{
    question: "What is likely the first game to use the word f***?",
    A: "Battle Toads",
    B: "Tony Hawk Pro Skater",
    C: "Paranoia",
    D: "Skyrim",
    correct: "C"
},{
    question: "What is the name of the song GladOS sings to the player at the end of Portal?",
    A: "Cara Mia",
    B: "Thriller",
    C: "The Cake is a Lie",
    D: "Still Alive",
    correct: "D"
}];


window.onload = function () {

    // function getRandomInt(array) {
    //     return Math.floor(Math.random() * Math.floor(array));
    // };

    // var triviaQuestion = trivia[getRandomInt(trivia.length)];
    var intervalId;
    var timerRunning = true;
    var usedQuestions = [];
    var correctAnswers = 0;
    var wrongAnswers = 0;

    var newQuestion = function () {

        if(usedQuestions.length<=19){

        function getRandomInt(array) {
            return Math.floor(Math.random() * Math.floor(array));
        };
        var timeLeft = 15;
        var triviaQuestion = trivia[getRandomInt(trivia.length)];
        var triviaQuestionId = trivia.indexOf(triviaQuestion);
        
        if(usedQuestions.includes(triviaQuestionId)) {
            newQuestion();
        }

        else {
        usedQuestions.push(triviaQuestionId);
        console.log (usedQuestions);
        $("#triviaCard").html("<div class='row'><div class='col-md-12' id='questionArea'><p>Question question question question question question question question?</p></div></div><div class='row'><div class='col-md-12'><p style='font-size:14px'>Time left <span id='timeLeft'>00</span> seconds</p></div></div><div class='row'><div class='col-md-12' id='answerA'><p class='answer' id='answerAText' style='text-align:left'><span id='selectA'>► </span>A. Answer</p></div></div><div class='row'><div class='col-md-12' id='answerB'><p class='answer' id='answerBText' style='text-align:left'><span id='selectB'>► </span>B. Answer</p></div></div><div class='row'><div class='col-md-12' id='answerC'><p class='answer' id='answerCText' style='text-align:left'><span id='selectC'>► </span>C. Answer</p></div></div><div class='row' style='padding-bottom: 35%'><div class='col-md-12' id='answerD'><p class='answer' id='answerDText' style='text-align:left'><span id='selectD'>► </span>D. Answer</p></div></div>");
        $("#timeLeft").html(timeLeft);
        $("#questionArea").html("<p>" + triviaQuestion.question + "</p>");
        $("#answerA").html("<p class='answer' id='A' style='text-align:left'><span id='selectA'>► </span>A. " + triviaQuestion.A + "</p>");
        $("#answerB").html("<p class='answer' id='B' style='text-align:left'><span id='selectB'>► </span>B. " + triviaQuestion.B + "</p>");
        $("#answerC").html("<p class='answer' id='C' style='text-align:left'><span id='selectC'>► </span>C. " + triviaQuestion.C + "</p>");
        $("#answerD").html("<p class='answer' id='D' style='text-align:left'><span id='selectD'>► </span>D. " + triviaQuestion.D + "</p>");
        console.log (triviaQuestion.question);
        console.log ("Score: "+correctAnswers+" correct, "+wrongAnswers+" wrong");
        if (timerRunning) {
            count = function() {
                timeLeft--;
                $("#timeLeft").html(timeLeft);
    
                if (timeLeft===0) {
                    clearInterval(intervalId);
                    outOfTime();
                };
            };
    
            intervalId = setInterval(count,1000);
            
    
            
        };
        
        var answerPicked = function() {
            var letter = this.id;
            console.log (letter);
            clearInterval(intervalId);
            if(letter === triviaQuestion.correct) {
                correctAnswer();
            }
            else {
                wrongAnswer();
            };
        };
    
        var correctAnswer = function() {
            console.log("correct");
            $("#triviaCard").empty();
            $("#triviaCard").html("<div class='row'><div class='col-md-12'><p>CORRECT</p><p>The correct answer was ''"+triviaQuestion.correct+".''</p><div id='animation' style='height:500px'><img src='assets/images/BrainWin1.png' style='width:75%; margin-left:12.5%'></div></div></div>");
            setTimeout(function() {
                $("#animation").empty();
                $("#animation").html("<img src='assets/images/BrainWin2.png' style='width:75%; margin-left:12.5%'>");
            },500);
            setTimeout(function() {
                $("#animation").empty();
                $("#animation").html("<img src='assets/images/BrainWin3.png' style='width:75%; margin-left:12.5%'>");
            },750);
            setTimeout(function() {
                $("#animation").empty();
                $("#animation").html("<img src='assets/images/BrainWin2.png' style='width:75%; margin-left:12.5%'>");
            },1000);
            setTimeout(function() {
                $("#animation").empty();
                $("#animation").html("<img src='assets/images/BrainWin3.png' style='width:75%; margin-left:12.5%'>");
            },1250);
            setTimeout(function() {
                $("#animation").empty();
                $("#animation").html("<img src='assets/images/BrainWin1.png' style='width:75%; margin-left:12.5%'>");
            },1500);
            correctAnswers++
            setTimeout(function() {
                $("#triviaCard").empty();
                newQuestion();
            },2000);
        };
        
        var wrongAnswer = function() {
            console.log("wrong");
            $("#triviaCard").empty();
            $("#triviaCard").html("<div class='row'><div class='col-md-12'><p>WRONG</p><p>The correct answer was ''"+triviaQuestion.correct+".''</p><div id='animation' style='height:500px'><img src='assets/images/BrainLoss1.png' style='width:75%; margin-left:12.5%'></div></div></div>");
            setTimeout(function() {
                $("#animation").empty();
                $("#animation").html("<img src='assets/images/BrainLoss2.png' style='width:75%; margin-left:12.5%'>");
            },500);
            setTimeout(function() {
                $("#animation").empty();
                $("#animation").html("<img src='assets/images/BrainLoss3.png' style='width:75%; margin-left:12.5%'>");
            },1000);
            setTimeout(function() {
                $("#animation").empty();
                $("#animation").html("<img src='assets/images/BrainLoss4.png' style='width:75%; margin-left:12.5%'>");
            },1250);
            setTimeout(function() {
                $("#animation").empty();
                $("#animation").html("<img src='assets/images/BrainLoss3.png' style='width:75%; margin-left:12.5%'>");
            },1500);
            setTimeout(function() {
                $("#animation").empty();
                $("#animation").html("<img src='assets/images/BrainLoss4.png' style='width:75%; margin-left:12.5%'>");
            },1750);
            wrongAnswers++
            setTimeout(function() {
                $("#triviaCard").empty();
                newQuestion();
            },2000);
        };

        var outOfTime = function() {
            console.log("out of time");
            $("#triviaCard").empty();
            $("#triviaCard").html("<div class='row'><div class='col-md-12'><p style='height:500px'>OUT OF TIME</p></div></div>");
            wrongAnswers++
            setTimeout(function() {
                $("#triviaCard").empty();
                newQuestion();
            },2000);
        };
    
        $(".answer").on("click", answerPicked);
    };
        }
        else {
                $("#triviaCard").empty();
                $("#triviaCard").html("<div class='row'><div class='col-md-12' id='resultScreen'><p>GAME!</p><br /><p>Correct: "+correctAnswers+"</p><p>Wrong: "+wrongAnswers+"</p></div></div>");
                if (correctAnswers>=wrongAnswers) {
                    $("#resultScreen").append("<p>YOU WIN!</p>");
                }
                else {
                    $("#resultScreen").append("<p>YOU LOSE!</p>");
                };
                $("#resultScreen").append("<div id='playAgain'><p style='height:250px'><span id='selectPlayAgain'>► </span>Play again</p></div>");
                $("#playAgain").on("click", function () {
                    correctAnswers = 0;
                    wrongAnswers = 0;
                    usedQuestions = [];
                    newQuestion();
                    console.log("playAgain clicked")
                    });
        };
    };
    newQuestion();
    }